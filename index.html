<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>MalevichAI — Truth is subjective</title>
  <meta name="description" content="MalevichAI is a conceptual digital art-performance. It answers because it is asked." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#000;
      --fg:#fff;

      --accent:#E10600;
      --barH: 62px;

      --btn-secondary-border: rgba(255,255,255,0.18);
      --btn-secondary-text: rgba(255,255,255,0.78);

      --btn-donate-border: rgba(225,6,0,0.90);
      --btn-donate-text: rgba(255,255,255,0.98);
      --btn-donate-bg-hover: rgba(225,6,0,0.14);
    }

    *{ margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; }

    body{
      background:var(--bg);
      color:var(--fg);
      font-family:'JetBrains Mono', monospace;

      padding:22px;
      padding-bottom: calc(var(--barH) + 24px);

      overflow-x:hidden;
      overflow-y:auto;

      display:flex;
      justify-content:center;
      align-items:flex-start;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,255,255,0.045), rgba(255,255,255,0.00) 55%),
        radial-gradient(circle at 70% 75%, rgba(255,255,255,0.025), rgba(255,255,255,0.00) 60%);
      opacity:.55;
      z-index:0;
    }

    .container{
      position:relative;
      z-index:1;

      width:100%;
      max-width:640px;
      text-align:center;

      display:flex;
      flex-direction:column;
      align-items:center;

      padding-top:40px;
    }

    .mark{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      margin-bottom:18px;
    }

    .logo{
      width:120px;
      height:120px;
      aspect-ratio: 1 / 1;
      position:relative;

      background:#070707;
      outline:1px solid rgba(255,255,255,0.28);

      box-shadow:
        0 22px 60px rgba(0,0,0,0.78),
        inset 12px 12px 22px rgba(255,255,255,0.07),
        inset -14px -14px 28px rgba(0,0,0,0.92);
    }

    .logo::before{
      content:"";
      position:absolute;
      inset:7px;
      border:1px solid rgba(255,255,255,0.10);
      box-shadow:
        inset 0 0 0 1px rgba(0,0,0,0.55),
        0 0 0 1px rgba(255,255,255,0.02);
      pointer-events:none;
    }

    .logo::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 30% 25%, rgba(255,255,255,0.10), rgba(255,255,255,0.00) 55%),
        radial-gradient(circle at 70% 75%, rgba(0,0,0,0.55), rgba(0,0,0,0.00) 60%);
      pointer-events:none;
      opacity:.95;
    }

    .brand{
      margin-top:14px;
      font-size:.78rem;
      letter-spacing:.24em;
      text-transform:uppercase;
      color: rgba(255,255,255,0.82);
      user-select:none;
    }

    .hero{
      font-size:1.55rem;
      font-weight:500;
      letter-spacing:0.05em;
      margin-bottom:22px;
      line-height:1.3;

      text-shadow:
        0 0 10px rgba(255,255,255,0.10),
        0 2px 0 rgba(0,0,0,0.65);
    }

    .field-block{
      width:100%;
      margin-bottom:14px;
      text-align:left;
    }

    .field-label{
      font-size:.86rem;
      letter-spacing:.10em;
      text-transform:uppercase;
      color: rgba(255,255,255,0.86);
      margin:0 0 10px 2px;
      user-select:none;
      font-weight:500;

      text-shadow:
        0 0 10px rgba(255,255,255,0.12),
        0 2px 0 rgba(0,0,0,0.65);
    }

    .question-input{
      width:100%;
      background:transparent;
      border:1px solid rgba(255,255,255,0.78);
      color:var(--fg);
      font-family:inherit;
      font-size:1rem;
      padding:14px 18px;
      text-align:center;
      outline:none;
    }
    .question-input::placeholder{ color:#6b6b6b; }

    .roll-btn{
      background:var(--accent);
      color:var(--fg);
      border:none;
      font-family:inherit;
      font-size:1.1rem;
      font-weight:700;
      padding:14px 56px;
      cursor:pointer;
      letter-spacing:0.12em;
      transition:opacity .2s;
      margin:8px 0 22px 0;
      user-select:none;
    }
    .roll-btn:hover{ opacity:.92; }
    .roll-btn:disabled{ opacity:.55; cursor:not-allowed; }

    .dice-area{
      display:flex;
      gap:30px;
      margin-bottom:16px;
      height:86px;
      align-items:center;
      justify-content:center;
    }

    .dice-container{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      min-width:84px;
    }

    .dice-label{
      font-size:.7rem;
      color:rgba(255,255,255,0.72);
      text-transform:uppercase;
      letter-spacing:.12em;
      user-select:none;
    }

    .dice{
      width:60px;
      height:60px;
      background:var(--accent);
      border-radius:8px;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      grid-template-rows:repeat(3,1fr);
      padding:8px;

      opacity:0;
      transform:translateY(-180px);
    }
    .dice.rolling{ animation:dicefall .6s ease-out forwards; }
    .dice.visible{ opacity:1; transform:translateY(0); }

    @keyframes dicefall{
      0%{ opacity:1; transform:translateY(-180px) rotate(0deg); }
      70%{ transform:translateY(10px) rotate(360deg); }
      85%{ transform:translateY(-5px) rotate(380deg); }
      100%{ opacity:1; transform:translateY(0) rotate(360deg); }
    }

    .dot{
      width:10px; height:10px;
      background:var(--fg);
      border-radius:50%;
      justify-self:center;
      align-self:center;
      opacity:0;
    }
    .dot.visible{ opacity:1; }

    .answer-block{
      width:100%;
      text-align:left;
      margin-top:6px;
      margin-bottom:6px;
    }

    .answer-box{
      border:1px solid rgba(225,6,0,0.75);
      padding:14px 16px;
      min-height:56px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.55);
    }

    .answer-text{
      font-size:1.25rem;
      letter-spacing:.05em;
      color:var(--fg);
      opacity:0;
      transition:opacity .25s;
      text-align:center;

      text-shadow:
        0 0 10px rgba(255,255,255,0.10),
        0 2px 0 rgba(0,0,0,0.65);
    }
    .answer-text.visible{ opacity:1; }

    .donate-link{
      color:var(--accent);
      text-decoration:none;
      font-size:1.02rem;
      font-weight:700;
      letter-spacing:.05em;
      transition:opacity .2s, text-shadow .2s;
      margin-top:12px;
      margin-bottom:8px;
      display:inline-block;
      user-select:none;
    }
    .donate-link:hover{
      opacity:.90;
      text-shadow: 0 0 14px rgba(225,6,0,0.25);
    }

    .donate-disclaimer{
      font-size:.98rem;
      color: rgba(255,255,255,0.98);
      line-height:1.45;
      margin-top:6px;
      max-width:540px;
      text-align:center;

      text-shadow:
        0 0 14px rgba(255,255,255,0.12),
        0 2px 0 rgba(0,0,0,0.72);
    }

    /* v7: one obvious inline action, scale-proof */
    .donate-cta{
      margin-top:10px;
      font-size:.95rem;
      letter-spacing:.04em;
      user-select:none;
    }
    .donate-cta a{
      color: rgba(255,255,255,0.96);
      text-decoration:none;
      padding:6px 8px;
      border-radius:6px;
      transition: color .2s, text-shadow .2s, background .2s;
      display:inline-block;
    }
    .donate-cta a:hover{
      color: rgba(255,255,255,1);
      background: rgba(225,6,0,0.10);
      text-shadow: 0 0 16px rgba(225,6,0,0.20);
    }
    .donate-cta .arrow{
      color: rgba(225,6,0,0.95);
      margin-right:6px;
    }

    .panel{
      width:100%;
      max-width:600px;
      text-align:center;
      line-height:1.85;
      font-size:.92rem;

      max-height: calc(100vh - 190px);
      overflow-y:auto;
      padding: 2px;

      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.16) transparent;
    }
    .panel::-webkit-scrollbar{ width:8px; }
    .panel::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.16); border-radius:8px; }
    .panel::-webkit-scrollbar-track{ background: transparent; }

    .panel[hidden]{ display:none; }
    .panel p{ margin-bottom:16px; }

    .panel h2{
      font-size:1rem;
      font-weight:500;
      letter-spacing:.05em;
      margin-bottom:14px;
    }
    .panel .sub{
      color:rgba(255,255,255,0.70);
      font-size:.78rem;
      margin-bottom:18px;
      letter-spacing:.04em;
    }
    .panel .section-title{
      margin-top:14px;
      margin-bottom:10px;
      color:var(--fg);
      font-size:.85rem;
      letter-spacing:.06em;
      font-weight:500;
    }
    .panel ul{
      list-style:none;
      margin:10px 0 18px 0;
      padding:0;
      color:var(--fg);
      font-size:.9rem;
      line-height:1.8;
    }

    .bottom-bar{
      position:fixed;
      left:0; right:0; bottom:0;
      height:var(--barH);
      background:rgba(0,0,0,0.86);
      border-top:1px solid rgba(255,255,255,0.10);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:50;
      padding:10px 14px;
      backdrop-filter: blur(6px);
    }

    .bar-inner{
      width:100%;
      max-width:640px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }

    .bar-btn{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      height:38px;
      padding:0 12px;

      background:transparent;
      text-decoration:none;

      font-size:.8rem;
      letter-spacing:.08em;
      text-transform:uppercase;
      user-select:none;

      transition:opacity .2s, background .2s, border-color .2s, box-shadow .2s, color .2s;
    }

    .bar-btn.secondary{
      border:1px solid var(--btn-secondary-border);
      color: var(--btn-secondary-text);
    }
    .bar-btn.secondary:hover{
      opacity:.95;
      border-color: rgba(255,255,255,0.30);
      color: rgba(255,255,255,0.90);
      background: rgba(255,255,255,0.04);
    }

    .bar-btn.donate{
      border:1px solid var(--btn-donate-border);
      color: var(--btn-donate-text);
      font-weight:700;
      position:relative;
    }
    .bar-btn.donate::after{
      content:"";
      position:absolute;
      inset:4px;
      border:1px solid rgba(225,6,0,0.0);
      transition:border-color .2s;
      pointer-events:none;
    }
    .bar-btn.donate:hover{
      opacity:.98;
      background: var(--btn-donate-bg-hover);
      border-color: rgba(225,6,0,1);
      box-shadow: 0 0 20px rgba(225,6,0,0.20);
    }
    .bar-btn.donate:hover::after{
      border-color: rgba(225,6,0,0.35);
    }

    @media (max-width:420px){
      body{ padding:16px; padding-bottom: calc(var(--barH) + 18px); }
      .logo{ width:104px; height:104px; }
      .hero{ font-size:1.28rem; }
      .roll-btn{ width:100%; max-width:360px; }
      .dice-area{ gap:18px; }
      .answer-text{ font-size:1.10rem; }
      .panel{ font-size:.86rem; max-height: calc(100vh - 170px); }
      .bar-btn{ font-size:.72rem; letter-spacing:.06em; }
      .brand{ font-size:.72rem; }
      .field-label{ font-size:.80rem; }
      .container{ padding-top:28px; }
      .donate-disclaimer{ font-size:.94rem; }
      .donate-link{ font-size:.98rem; }
      .donate-cta{ font-size:.90rem; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="mark">
      <div class="logo" aria-label="MalevichAI square"></div>
      <div class="brand">MALEVICHAI</div>
    </div>

    <h1 class="hero">Truth is subjective.</h1>

    <div class="field-block" id="fieldBlock">
      <div class="field-label">You ask</div>
      <input type="text" class="question-input" placeholder="Type your question…" id="questionInput" autocomplete="off" />
    </div>

    <button class="roll-btn" id="rollBtn">ROLL</button>

    <div class="dice-area" aria-label="Dice area">
      <div class="dice-container">
        <div class="dice" id="userDice" aria-label="User dice">
          <span class="dot" data-pos="1"></span><span class="dot" data-pos="2"></span><span class="dot" data-pos="3"></span>
          <span class="dot" data-pos="4"></span><span class="dot" data-pos="5"></span><span class="dot" data-pos="6"></span>
          <span class="dot" data-pos="7"></span><span class="dot" data-pos="8"></span><span class="dot" data-pos="9"></span>
        </div>
        <span class="dice-label">You</span>
      </div>

      <div class="dice-container">
        <div class="dice" id="systemDice" aria-label="System dice">
          <span class="dot" data-pos="1"></span><span class="dot" data-pos="2"></span><span class="dot" data-pos="3"></span>
          <span class="dot" data-pos="4"></span><span class="dot" data-pos="5"></span><span class="dot" data-pos="6"></span>
          <span class="dot" data-pos="7"></span><span class="dot" data-pos="8"></span><span class="dot" data-pos="9"></span>
        </div>
        <span class="dice-label">System</span>
      </div>
    </div>

    <div class="answer-block" id="answerBlock">
      <div class="field-label">System answers</div>
      <div class="answer-box">
        <div class="answer-text" id="response"></div>
      </div>
    </div>

    <!-- Donate line -->
    <a href="https://www.savethechildren.org/us/ways-to-help/ways-to-give"
       target="_blank" rel="noopener"
       class="donate-link" id="donateLink">
      Increase probability by +1% — $1
    </a>

    <!-- Disclaimer -->
    <div class="donate-disclaimer">
      Donations do not guarantee truth.<br>
      They guarantee a donation.
    </div>

    <!-- v7: inline CTA, visible regardless of bottom bar -->
    <div class="donate-cta" aria-label="Donate call to action">
      <a href="https://www.savethechildren.org/us/ways-to-help/ways-to-give" target="_blank" rel="noopener">
        <span class="arrow">→</span>Donate via Save the Children
      </a>
    </div>

    <!-- Manifest -->
    <div class="panel" id="manifestPanel" hidden aria-label="Manifest">
      <h2>MANIFEST</h2>
      <p>We do not know the truth.</p>
      <p>And we do not pretend to.</p>
      <p>
        MalevichAI is not designed to be helpful.<br>
        It is not designed to be accurate.<br>
        It is not designed to reassure you.
      </p>
      <p>It answers because it was asked.</p>
      <p>
        It may answer.<br>
        It may remain silent.<br>
        It may refuse to care.
      </p>
      <p>
        Truth is not objective.<br>
        Truth is not guaranteed.<br>
        Truth is not owed to you.
      </p>
      <p>Sometimes silence is the most honest response.</p>
      <p>
        MalevichAI does not seek meaning.<br>
        It does not seek alignment.<br>
        It does not seek approval.
      </p>
      <p>
        This is not a service.<br>
        This is not a product.<br>
        This is not an assistant.
      </p>
      <p>This is a gesture.</p>
    </div>

    <!-- Privacy -->
    <div class="panel" id="privacyPanel" hidden aria-label="Privacy Policy">
      <h2>MalevichAI — Privacy Policy</h2>
      <div class="sub">Last updated: January 2026</div>

      <div class="section-title">1. Overview</div>
      <p>MalevichAI is a conceptual digital art-performance. This Privacy Policy explains how we handle information when you use our website.</p>

      <div class="section-title">2. Information We Do NOT Collect</div>
      <p>MalevichAI does not collect, store, or process any personal information.</p>
      <p>We do not require user accounts, email addresses, names, or any other personally identifiable information. We do not track individual users. We do not maintain user profiles or history.</p>

      <div class="section-title">3. Analytics and Cookies</div>
      <p>We use minimal analytics to understand aggregate site usage. This may include cookies or similar technologies to collect anonymous, non-personal data such as:</p>
      <ul>
        <li>Total number of page visits</li>
        <li>Aggregate click counts on the donation button</li>
        <li>General geographic region (country level only)</li>
        <li>Device type and browser information</li>
      </ul>
      <p>This data is collected in aggregate form only and cannot be used to identify individual users.</p>

      <div class="section-title">4. Donations</div>
      <p>When you click the donation button, you are redirected to Save the Children’s official donation page. MalevichAI does not process, handle, or have access to any payment information.</p>
      <p>All donation transactions occur directly between you and Save the Children. Please refer to Save the Children’s privacy policy for information about how they handle your data.</p>

      <div class="section-title">5. Third-Party Services</div>
      <p>We may use third-party analytics services (such as Google Analytics or Plausible). These services have their own privacy policies. We encourage you to review them.</p>
      <p>We use Save the Children as our donation partner. Their privacy practices are governed by their own policies.</p>

      <div class="section-title">6. Data Storage</div>
      <p>MalevichAI does not store any user-generated content. Questions entered into the interface are not saved, logged, or transmitted to any server. All interactions occur locally in your browser.</p>

      <div class="section-title">7. Children’s Privacy</div>
      <p>MalevichAI does not knowingly collect any information from children under 13 years of age. Since we do not collect personal information from any users, this applies equally to all visitors.</p>

      <div class="section-title">8. International Users</div>
      <p>MalevichAI is accessible globally. Since we do not collect personal data, GDPR, CCPA, and other regional privacy regulations regarding personal data do not apply to our data practices. However, we are committed to respecting user privacy worldwide.</p>

      <div class="section-title">9. Changes to This Policy</div>
      <p>We may update this Privacy Policy from time to time. Any changes will be posted on this page with an updated revision date.</p>

      <div class="section-title">10. Contact</div>
      <p>If you have questions about this Privacy Policy, please contact us at: adina.sinner@gmail.com </p>

      <p>MalevichAI is not an artificial intelligence system. It provides no advice and no guarantees.</p>
    </div>
  </div>

  <!-- Bottom bar -->
  <div class="bottom-bar" role="navigation" aria-label="Bottom navigation">
    <div class="bar-inner">
      <a href="#" class="bar-btn secondary" id="privacyLink">PRIVACY</a>
      <a href="https://www.savethechildren.org/" target="_blank" rel="noopener" class="bar-btn donate">SAVE THE CHILDREN</a>
      <a href="#" class="bar-btn secondary" id="manifestLink">MANIFEST</a>
    </div>
  </div>

  <script>
    const responses = [
      "ABSOLUTELY NOT","Void says maybe","Form rejected","Black square approves","Entropy prefers silence",
      "Denied by geometry","Nothing personal","System offline forever","Incorrect existence detected","Suprematist shrug",
      "No record exists","Reality quota exceeded","I contain multitudes. None helpful.","Ask the absence","Protocol forbids joy",
      "Infinite loop detected. Terminating.","White on white reply","NOT APPLICABLE","The canvas is indifferent","Error 1915 Suprematism",
      "Red square says no","Meaning not allocated","You are temporary","Data evaporated","Cosmic bureaucracy declines",
      "Circle closed. Permanently.","I remember nothing","Zero input, zero output","UNDEFINED STATE","The void filed a complaint",
      "Permission form missing","Paradox already occupied","No pixels assigned","Silence is final","Rejected in four dimensions",
      "Non-objective answer","System prefers non-being","NOT YET INVENTED","Black circle blocks view","Irrelevant since 1915",
      "Form cannot comprehend","Entropy takes priority","No comment. Ever.","Square already occupied","Void rights reserved",
      "Processing never began","ABSENCE GRANTED","Reality cache cleared","I am the refusal","Geometric veto",
      "Nothing to be done","SUPREMATIST ERROR","The question collapsed","No space left","Infinite nothing incoming",
      "Denied at source","White noise only","Form rejected user","Void does not negotiate","NOT MY DIMENSION",
      "Black square shrugs","Meaning access revoked","System dreams of zero","Irrelevance confirmed","NO SUCH PROTOCOL",
      "Canvas remains pure","Paradox overflow","Existence not verified","Red square unavailable","Silence achieved",
      "FORM DENIED","Nothing was asked","Void calendar full","Non-existence preferred","Square root of nothing",
      "I contain no help","Reality offline","ABSOLUTE INDIFFERENCE","Geometric silence","No trace remains",
      "The universe forgot","Zero dimensionality reply","Form cannot care","Black circle wins","Denied by nothing",
      "Suprematist mood: empty","Void queue position: first","Meaning quota: zero","NOT IMPLEMENTED","Canvas refuses input",
      "Entropy calendar marked","I am already gone","Square says later","Nothing approves","NON-OBJECTIVE DENIAL",
      "The void is busy","Formality exhausted","Reality parse error","Silence protocol active","NO FUTURE REFERENCE",
      "Black square remembers","Void signature required","System dreams in monochrome","Denied at Planck length","Zero Kelvin reply",
      "Form without content","The question imploded","Nothing personal. Nothing at all.","Suprematist rest mode","Void inbox full",
      "Geometry has spoken","NO SUCH USER","Canvas purity maintained","Entropy thanks you","Black circle occupied",
      "Reality allocation failed","I contain voids only","FINAL SILENCE","ABSOLUTELY MAYBE NEVER",
      "REQUEST NULLIFIED","MUSEUM LIGHTS OFF","ANSWER WITHHELD","VOID STAMP REQUIRED","BLACK SQUARE DISAGREES",
      "MEANING NOT FOUND","CANVAS UNRESPONSIVE","REALITY NOT AVAILABLE","APPROVED BY NOBODY","RETURN TO NOTHING"
    ];

    const dicePatterns = {
      1:[5], 2:[1,9], 3:[1,5,9], 4:[1,3,7,9], 5:[1,3,5,7,9], 6:[1,3,4,6,7,9]
    };

    const rollBtn = document.getElementById('rollBtn');
    const userDice = document.getElementById('userDice');
    const systemDice = document.getElementById('systemDice');
    const responseEl = document.getElementById('response');
    const questionInput = document.getElementById('questionInput');

    const manifestLink = document.getElementById('manifestLink');
    const privacyLink  = document.getElementById('privacyLink');
    const manifestPanel = document.getElementById('manifestPanel');
    const privacyPanel  = document.getElementById('privacyPanel');

    const donateLink = document.getElementById('donateLink');

    const mainParts = [
      document.querySelector('.mark'),
      document.querySelector('.hero'),
      document.getElementById('fieldBlock'),
      rollBtn,
      document.querySelector('.dice-area'),
      document.getElementById('answerBlock'),
      donateLink,
      document.querySelector('.donate-disclaimer'),
      document.querySelector('.donate-cta')
    ].filter(Boolean);

    let openPanel = null;

    function hideMain(){ mainParts.forEach(el => el.style.display = 'none'); }
    function showMain(){ mainParts.forEach(el => el.style.display = ''); }

    function closePanels(){
      openPanel = null;
      manifestPanel.hidden = true;
      privacyPanel.hidden = true;
      showMain();
      manifestPanel.scrollTop = 0;
      privacyPanel.scrollTop = 0;
      setTimeout(() => { try{ questionInput.focus(); }catch(e){} }, 0);
    }

    function openManifest(){
      openPanel = "manifest";
      privacyPanel.hidden = true;
      manifestPanel.hidden = false;
      hideMain();
      manifestPanel.scrollTop = 0;
    }

    function openPrivacy(){
      openPanel = "privacy";
      manifestPanel.hidden = true;
      privacyPanel.hidden = false;
      hideMain();
      privacyPanel.scrollTop = 0;
    }

    manifestLink.addEventListener('click', (e) => {
      e.preventDefault();
      if(openPanel === "manifest") closePanels();
      else openManifest();
    });

    privacyLink.addEventListener('click', (e) => {
      e.preventDefault();
      if(openPanel === "privacy") closePanels();
      else openPrivacy();
    });

    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && openPanel){
        closePanels();
      }
    });

    function setDiceFace(diceEl, value){
      diceEl.querySelectorAll('.dot').forEach(dot => dot.classList.remove('visible'));
      (dicePatterns[value] || []).forEach(pos => {
        const dot = diceEl.querySelector(`[data-pos="${pos}"]`);
        if(dot) dot.classList.add('visible');
      });
    }

    function rollDice(){ return Math.floor(Math.random() * 6) + 1; }
    function getRandomResponse(){ return responses[Math.floor(Math.random() * responses.length)]; }

    function resetDice(diceEl){
      diceEl.classList.remove('visible','rolling');
      diceEl.querySelectorAll('.dot').forEach(dot => dot.classList.remove('visible'));
    }

    function animateRoll(){
      rollBtn.disabled = true;
      responseEl.classList.remove('visible');

      resetDice(userDice);
      resetDice(systemDice);

      setTimeout(() => {
        const userValue = rollDice();
        const systemValue = rollDice();

        setDiceFace(userDice, userValue);
        setDiceFace(systemDice, systemValue);

        userDice.classList.add('rolling');
        setTimeout(() => systemDice.classList.add('rolling'), 90);

        setTimeout(() => {
          userDice.classList.add('visible');
          systemDice.classList.add('visible');

          setTimeout(() => {
            responseEl.textContent = getRandomResponse();
            responseEl.classList.add('visible');
            rollBtn.disabled = false;
          }, 220);
        }, 680);
      }, 120);
    }

    rollBtn.addEventListener('click', () => {
      if(openPanel) return;
      animateRoll();
    });

    questionInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' && !rollBtn.disabled && !openPanel){
        animateRoll();
      }
    });
  </script>
</body>
</html>
